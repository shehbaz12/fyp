<div class="volunteers-page">
    <div class="page-header">
        <h1>Volunteer Coordination</h1>
        <button mat-raised-button color="primary" (click)="openAddVolunteer()">
            <mat-icon>add</mat-icon> Add Volunteer
        </button>
    </div>

    <mat-card class="table-card">
        <table mat-table [dataSource]="volunteers$" class="w-full">

            <!-- Name -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Volunteer </th>
                <td mat-cell *matCellDef="let vol">
                    <div class="volunteer-info">
                        <mat-icon class="avatar-icon">account_circle</mat-icon>
                        <span class="name">{{ vol.name }}</span>
                    </div>
                </td>
            </ng-container>

            <!-- Expertise -->
            <ng-container matColumnDef="expertise">
                <th mat-header-cell *matHeaderCellDef> Expertise </th>
                <td mat-cell *matCellDef="let vol"> {{ vol.expertise }} </td>
            </ng-container>

            <!-- Contact -->
            <ng-container matColumnDef="contact">
                <th mat-header-cell *matHeaderCellDef> Contact </th>
                <td mat-cell *matCellDef="let vol"> {{ vol.contact }} </td>
            </ng-container>

            <!-- Availability -->
            <ng-container matColumnDef="availability">
                <th mat-header-cell *matHeaderCellDef> Status </th>
                <td mat-cell *matCellDef="let vol">
                    <mat-chip [class.available]="vol.availability === 'Available'"
                        [class.assigned]="vol.availability === 'Assigned'"
                        [class.offline]="vol.availability === 'Offline'">
                        {{ vol.availability }}
                    </mat-chip>
                </td>
            </ng-container>

            <!-- Task -->
            <ng-container matColumnDef="task">
                <th mat-header-cell *matHeaderCellDef> Assigned Task </th>
                <td mat-cell *matCellDef="let vol">
                    <span *ngIf="vol.assignedTask" class="current-task">{{ vol.assignedTask }}</span>
                    <span *ngIf="!vol.assignedTask" class="no-task">-</span>
                </td>
            </ng-container>

            <!-- Actions -->
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef> Actions </th>
                <td mat-cell *matCellDef="let vol">
                    <button mat-icon-button [matMenuTriggerFor]="menu">
                        <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="assignTask(vol.id, 'Distribution Drive')">Assign
                            Distribution</button>
                        <button mat-menu-item (click)="assignTask(vol.id, 'Medical Camp')">Assign Medical Camp</button>
                        <mat-divider></mat-divider>
                        <button mat-menu-item (click)="unassign(vol.id)"
                            [disabled]="vol.availability !== 'Assigned'">Unassign</button>
                    </mat-menu>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </mat-card>
</div>