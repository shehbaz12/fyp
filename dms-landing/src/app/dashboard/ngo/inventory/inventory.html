<div class="inventory-page">
    <div class="page-header">
        <h1>Inventory Management</h1>
        <button mat-flat-button color="primary" (click)="addItem()">
            <mat-icon>add</mat-icon>
            Add Item
        </button>
    </div>

    <mat-card class="table-card">
        <table mat-table [dataSource]="inventory$" class="w-full">

            <!-- Name -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Item Name </th>
                <td mat-cell *matCellDef="let item">
                    <div class="item-name">
                        <span class="category-dot" [class]="item.category | lowercase"></span>
                        {{ item.name }}
                    </div>
                </td>
            </ng-container>

            <!-- Category -->
            <ng-container matColumnDef="category">
                <th mat-header-cell *matHeaderCellDef> Category </th>
                <td mat-cell *matCellDef="let item"> {{ item.category }} </td>
            </ng-container>

            <!-- Quantity -->
            <ng-container matColumnDef="quantity">
                <th mat-header-cell *matHeaderCellDef> Quantity </th>
                <td mat-cell *matCellDef="let item">
                    <span [class.text-red-500]="item.quantity < 20">{{ item.quantity }}</span>
                </td>
            </ng-container>

            <!-- Unit -->
            <ng-container matColumnDef="unit">
                <th mat-header-cell *matHeaderCellDef> Unit </th>
                <td mat-cell *matCellDef="let item"> {{ item.unit }} </td>
            </ng-container>

            <!-- Last Updated -->
            <ng-container matColumnDef="lastUpdated">
                <th mat-header-cell *matHeaderCellDef> Last Updated </th>
                <td mat-cell *matCellDef="let item"> {{ item.lastUpdated | date:'shortDate' }} </td>
            </ng-container>

            <!-- Actions -->
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef> Actions </th>
                <td mat-cell *matCellDef="let item">
                    <button mat-icon-button color="primary" (click)="updateQuantity(item.id, 1)">
                        <mat-icon>add</mat-icon>
                    </button>
                    <button mat-icon-button color="warn" (click)="updateQuantity(item.id, -1)">
                        <mat-icon>remove</mat-icon>
                    </button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </mat-card>
</div>